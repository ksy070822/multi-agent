# PetCare Multi-Agent Backend

ë°˜ë ¤ë™ë¬¼ ì‘ê¸‰ë„ í‰ê°€ë¥¼ ìœ„í•œ ë©€í‹°ì—ì´ì „íŠ¸ ë°±ì—”ë“œ ì‹œìŠ¤í…œ

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

PetCare Multi-Agent BackendëŠ” ì—¬ëŸ¬ AI ì—ì´ì „íŠ¸ë¥¼ í™œìš©í•˜ì—¬ ë°˜ë ¤ë™ë¬¼ì˜ ì¦ìƒì„ ë¶„ì„í•˜ê³ , ì˜í•™ì  íŒë‹¨ì„ ìˆ˜í–‰í•˜ë©°, ì‘ê¸‰ë„ë¥¼ í‰ê°€í•˜ê³ , ì¼€ì–´ í”Œëœì„ ìƒì„±í•˜ëŠ” Python ê¸°ë°˜ ë°±ì—”ë“œ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

## ğŸ—ï¸ ì•„í‚¤í…ì²˜

ì‹œìŠ¤í…œì€ 5+1ê°œì˜ ì—ì´ì „íŠ¸ë¡œ êµ¬ì„±ë©ë‹ˆë‹¤:

1. **ğŸ‘©â€ğŸ’¼ ì ‘ìˆ˜ ë„ìš°ë¯¸ (Symptom Intake Agent)** - ìì—°ì–´ ì¦ìƒ ì„¤ëª…ì„ êµ¬ì¡°í™”ëœ ë°ì´í„°ë¡œ ë³€í™˜
2. **ğŸ§ª ê²€ì‚¬ì‹¤ ë¶„ì„ê´€ (Vision Agent)** - ì´ë¯¸ì§€/ì˜ìƒì„ ë¶„ì„í•˜ì—¬ ì‹œê°ì  ê±´ê°• ì§€í‘œ ì¶”ì¶œ
3. **ğŸ‘¨â€âš•ï¸ ì£¼ì¹˜ì˜ (Medical Agent)** - ì˜í•™ì  ë¶„ì„ ë° ê°ë³„ì§„ë‹¨ ìˆ˜í–‰
4. **ğŸš¨ ìœ„ê¸‰ë„ íŒë‹¨ì‹¤ (Triage Agent)** - ì‘ê¸‰ë„ ì ìˆ˜ ë° ìœ„ê¸‰ë„ ë ˆë²¨ ê³„ì‚°
5. **ğŸ©º ì¹˜ë£Œ ê³„íšì‹¤ (Careplan Agent)** - ë³´í˜¸ì ì¹œí™”ì ì¸ ì¼€ì–´ ê°€ì´ë“œ ìƒì„±
6. **ğŸ“‹ ì§„ë£Œ ìš”ì•½ì‹¤ (Root Orchestrator)** - ì „ì²´ ì›Œí¬í”Œë¡œìš° ì¡°ìœ¨

## ğŸš€ ì‹œì‘í•˜ê¸°

### í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- Python 3.11 ì´ìƒ
- pip ë˜ëŠ” poetry

### ì„¤ì¹˜ ë°©ë²•

1. ì €ì¥ì†Œ í´ë¡  ë° í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™:
```bash
cd petcare_advisor
```

2. ê°€ìƒ í™˜ê²½ ìƒì„±:
```bash
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
```

3. ì˜ì¡´ì„± ì„¤ì¹˜:
```bash
pip install -e .
pip install -e ".[dev]"  # ê°œë°œ ì˜ì¡´ì„± í¬í•¨
```

4. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •:
```bash
cp .env.example .env
```

`.env` íŒŒì¼ì„ ì—´ì–´ API í‚¤ë¥¼ ì¶”ê°€í•˜ì„¸ìš”:
```env
OPENAI_API_KEY=your_openai_api_key
GEMINI_API_KEY=your_gemini_api_key
VITE_OPENAI_API_KEY=your_openai_api_key
VITE_GEMINI_API_KEY=your_gemini_api_key
```

## ğŸƒ ì‹¤í–‰í•˜ê¸°

### ê°œë°œ ì„œë²„ ì‹¤í–‰

```bash
python -m petcare_advisor.main
```

ë˜ëŠ” uvicorn ì§ì ‘ ì‚¬ìš©:
```bash
uvicorn petcare_advisor.main:app --reload --host 0.0.0.0 --port 8000
```

APIëŠ” `http://localhost:8000`ì—ì„œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### API ë¬¸ì„œ

ì„œë²„ ì‹¤í–‰ í›„ ë‹¤ìŒ ì£¼ì†Œì—ì„œ API ë¬¸ì„œë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
- Swagger UI: `http://localhost:8000/docs`
- ReDoc: `http://localhost:8000/redoc`

## ğŸ“¡ API ì—”ë“œí¬ì¸íŠ¸

### Health Check

```bash
GET /health
```

ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸

### Triage Endpoint

```bash
POST /api/triage
```

ìš”ì²­ ì˜ˆì‹œ:
```json
{
  "symptom_description": "ê°•ì•„ì§€ê°€ êµ¬í† ë¥¼ í•˜ê³  ìˆì–´ìš”",
  "species": "dog",
  "breed": "ê³¨ë“  ë¦¬íŠ¸ë¦¬ë²„",
  "age": 5.0,
  "sex": "male",
  "weight": 30.0,
  "image_urls": [],
  "department": "digestive",
  "symptom_tags": ["vomiting", "loss_appetite"],
  "follow_up_answers": {},
  "free_text": "ì–´ì œ ì €ë…ë¶€í„° ì‹œì‘ëì–´ìš”"
}
```

## ğŸ§ª í…ŒìŠ¤íŠ¸

pytestë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰:
```bash
pytest
```

ì»¤ë²„ë¦¬ì§€ í¬í•¨:
```bash
pytest --cov=petcare_advisor --cov-report=html
```

## ğŸ› ï¸ ê°œë°œ

### ì½”ë“œ ìŠ¤íƒ€ì¼

í”„ë¡œì íŠ¸ëŠ” ë‹¤ìŒ ë„êµ¬ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤:
- **Black** - ì½”ë“œ í¬ë§·íŒ…
- **Ruff** - ë¦°íŒ…
- **mypy** - íƒ€ì… ì²´í¬

ì½”ë“œ í¬ë§·íŒ…:
```bash
black src/
```

ë¦°íŒ…:
```bash
ruff check src/
```

íƒ€ì… ì²´í¬:
```bash
mypy src/
```

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
multi-agent/
â”œâ”€â”€ petcare_advisor/
â”‚   â”œâ”€â”€ pyproject.toml          # í”„ë¡œì íŠ¸ ì„¤ì • ë° ì˜ì¡´ì„±
â”‚   â”œâ”€â”€ .env.example             # í™˜ê²½ ë³€ìˆ˜ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ README.md                # ìƒì„¸ ë¬¸ì„œ
â”‚   â”‚
â”‚   â””â”€â”€ src/
â”‚       â””â”€â”€ petcare_advisor/
â”‚           â”œâ”€â”€ __init__.py
â”‚           â”œâ”€â”€ config.py                # ì„¤ì • ê´€ë¦¬
â”‚           â”œâ”€â”€ main.py                 # FastAPI ì• í”Œë¦¬ì¼€ì´ì…˜ ì§„ì…ì 
â”‚           â”‚
â”‚           â”œâ”€â”€ shared/
â”‚           â”‚   â”œâ”€â”€ constants.py        # ì‹œìŠ¤í…œ ìƒìˆ˜
â”‚           â”‚   â”œâ”€â”€ types.py           # íƒ€ì… ì •ì˜ ë° GraphState
â”‚           â”‚   â””â”€â”€ utils.py           # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜
â”‚           â”‚
â”‚           â”œâ”€â”€ agents/
â”‚           â”‚   â”œâ”€â”€ root_orchestrator.py
â”‚           â”‚   â”œâ”€â”€ symptom_intake_agent.py
â”‚           â”‚   â”œâ”€â”€ vision_agent.py
â”‚           â”‚   â”œâ”€â”€ medical_agent.py
â”‚           â”‚   â”œâ”€â”€ triage_agent.py
â”‚           â”‚   â””â”€â”€ careplan_agent.py
â”‚           â”‚
â”‚           â”œâ”€â”€ tools/
â”‚           â”‚   â”œâ”€â”€ report_builder.py
â”‚           â”‚   â””â”€â”€ persistence.py
â”‚           â”‚
â”‚           â”œâ”€â”€ workflow/
â”‚           â”‚   â””â”€â”€ quality_workflow.py
â”‚           â”‚
â”‚           â””â”€â”€ tests/
â”‚               â”œâ”€â”€ test_smoke.py
â”‚               â”œâ”€â”€ test_agents.py
â”‚               â””â”€â”€ test_api.py
```

## ğŸ”„ ì›Œí¬í”Œë¡œìš°

ì§„ë‹¨ ì›Œí¬í”Œë¡œìš°ëŠ” ë‹¤ìŒ ìˆœì„œë¡œ ì§„í–‰ë©ë‹ˆë‹¤:

1. ì‚¬ìš©ìê°€ ì¦ìƒ ì„¤ëª… ì œì¶œ (ì„ íƒì ìœ¼ë¡œ ì´ë¯¸ì§€ í¬í•¨)
2. Root Orchestratorê°€ Symptom Intake Agent í˜¸ì¶œ
3. ì´ë¯¸ì§€ê°€ ì œê³µëœ ê²½ìš°, Vision Agent í˜¸ì¶œ
4. Medical Agent í˜¸ì¶œ
5. Triage Agent í˜¸ì¶œ
6. Careplan Agent í˜¸ì¶œ
7. Report Builder Tool í˜¸ì¶œ
8. ìµœì¢… ì§„ë‹¨ ë³´ê³ ì„œ ë°˜í™˜

## ğŸŒŸ ì£¼ìš” ê¸°ëŠ¥

- âœ… êµ¬ì¡°í™”ëœ ì¦ìƒ ì…ë ¥ (ì§„ë£Œê³¼ ì„ íƒ â†’ ì¦ìƒ íƒœê·¸ â†’ ì¶”ê°€ ì§ˆë¬¸)
- âœ… ì¢…ë³„ ë§ì¶¤ ì§„ë£Œê³¼ ë° ì¦ìƒ íƒœê·¸ (ê°•ì•„ì§€, ê³ ì–‘ì´, í† ë¼, í–„ìŠ¤í„°, ìƒˆ, ê³ ìŠ´ë„ì¹˜, íŒŒì¶©ë¥˜)
- âœ… ë³‘ì› ì»¨ì…‰ UI (ì ‘ìˆ˜ ë„ìš°ë¯¸, ê°„í˜¸ì‚¬, ì£¼ì¹˜ì˜, ìœ„ê¸‰ë„ íŒë‹¨ì‹¤ ë“±)
- âœ… AI ìƒê° ê³¼ì • ìš”ì•½ í‘œì‹œ
- âœ… í•œê¸€ ì‘ë‹µ ì§€ì›
- âœ… ë©€í‹° LLM ì§€ì› (Gemini, OpenAI, Claude)

## ğŸ“ ë¼ì´ì„ ìŠ¤

MIT

## ğŸ¤ ê¸°ì—¬í•˜ê¸°

ê¸°ì—¬ë¥¼ í™˜ì˜í•©ë‹ˆë‹¤! ë‹¤ìŒ ì‚¬í•­ì„ í™•ì¸í•´ì£¼ì„¸ìš”:
- ì½”ë“œê°€ í”„ë¡œì íŠ¸ì˜ ìŠ¤íƒ€ì¼ ê°€ì´ë“œë¼ì¸ì„ ë”°ë¥´ëŠ”ì§€
- ìƒˆ ê¸°ëŠ¥ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ê°€ ì¶”ê°€ë˜ì—ˆëŠ”ì§€
- í•„ìš”ì‹œ ë¬¸ì„œê°€ ì—…ë°ì´íŠ¸ë˜ì—ˆëŠ”ì§€

